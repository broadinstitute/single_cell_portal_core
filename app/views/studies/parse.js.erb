$('<%= params[:modal_target]%>').modal('hide');

// when uploading a file that can have multiple instances, only call completeWizardStep the first time
// also update progress bar
if (<%= %w(initialize_sub_clusters_form initialize_marker_genes_form initialize_fastq_form initialize_misc_form).include?(params[:partial]) %> && <%= @study.study_files.select {|sf| sf.file_type == @study_file.file_type && sf.cluster_type == @study_file.cluster_type}.count %> == 1) {
	completeWizardStep();
	var status = getWizardStatus();
	setWizardProgress(status);
}

// re-render form upload to get download button and increment completed status
$.get("<%= retrieve_wizard_upload_study_path(@study._id) %>", {file: '<%= params[:file] %>', selector: '<%= params[:selector] %>', partial: '<%= params[:partial] %>'});