// replace form with fresh instance if needed
if (<%= !@message.nil? %>) {
	$("<%= params[:target] %>").replaceWith("<%= escape_javascript( render partial: @partial, locals: {study_file: @study_file}) %>");
} else {
	$("<%= params[:target] %>").remove();
}
// if status needs to be decremented, reset necessary fields
if (<%= @reset_status %>) {
	resetWizardStep('<%= @partial %>_nav');
	var statusLabel = '<%= @partial %>_completed';
	$('#' + statusLabel).replaceWith("<small class='initialize-label' id='" + statusLabel + "'><span class='label label-<%= @color %>'><%= @status %></span></small>");
}

// check study initialization status and re-attach tooltip
$("#initialized").replaceWith("<%= escape_javascript(render partial: 'initialize_study_label') %>");
$('.initialize-label').tooltip({container: 'body'});

// close modal
$('#delete-modal').find('.spinner-target').data('spinner').stop();
$('#delete-modal').modal('hide');

// show message
if (<%= !@message.nil? %>) {
	$("#study-files-notice-target").html("<%= escape_javascript( render partial: 'studies/study_file_notices', locals: {message: @message}) %>");
};

